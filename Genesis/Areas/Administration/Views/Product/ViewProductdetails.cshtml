@{
    ViewBag.Title = "View Product Information";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section plugins{
    <script src="@Url.Content("~/Content/assets/global/plugins/select2/select2.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/assets/global/plugins/datatables/media/js/jquery.dataTables.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js")" type="text/javascript"></script>


}

@section scripts{
    <script src="@Url.Content("~/Content/assets/global/scripts/metronic.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/assets/admin/layout3/scripts/layout.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/assets/admin/layout3/scripts/demo.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/assets/global/scripts/datatable.js")" type="text/javascript"></script>
    
    <script src="@Url.Content("~/Content/assets/global/plugins/jquery-inputmask/jquery.inputmask.bundle.min.js")" type="text/javascript"></script>





}
@section css{
    <link href="@Url.Content("~/Content/assets/global/plugins/select2/select2.css")" rel="stylesheet" type="text/css">
    <link href="@Url.Content("~/Content/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css")" rel="stylesheet" type="text/css">
    <link href="@Url.Content("~/Content/assets/global/plugins/bootstrap-datepicker/css/datepicker.css")" rel="stylesheet" type="text/css">

    <link href="@Url.Content("~/Content/assets/global/plugins/bootstrap-datepicker/css/datepicker3.css")" rel="stylesheet" type="text/css">
    <link href="@Url.Content("~/Content/assets/global/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css")" rel="stylesheet" type="text/css">
    <link href="@Url.Content("~/Content/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css")" rel="stylesheet" type="text/css">

}


<input type="hidden" id="productId" value="@ViewBag.id" />

<!-- Begin: life time stats -->
<div class="portlet light">
    <div class="portlet-title">
        <div class="caption" data-bind="with: ProductInfo ">
            <i class="icon-user font-green-sharp"></i>
            <span class="caption-subject font-green-sharp bold uppercase">
                View Product - <span data-bind="text:productCode"></span>
            </span>

        </div>

        <div class="actions">
            <a href="javascript:backToList();" class="btn btn-default btn-circle">
                <i class="fa fa-angle-left"></i>
                <span class="hidden-480">
                    Back To Product List
                </span>
            </a>
        </div>



    </div>
    <div class="portlet-body">
        <!-- Begin: Product Information-->
        <div class="row">
            <div class="col-md-12 col-sm-12">
                <div class="alert display-hide alert-danger problemAjax">
                    <button class="close" data-close="alert"></button>
                    <span>
                        Ajax encountered a problem, Please contact system administrator.
                    </span>
                </div>
                <div class="portlet blue-hoki box">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-cogs"></i>Product Details
                        </div>
                        @*<div class="actions">
                            <a href="javascript:;" class="btn btn-default btn-sm">
                                <i class="fa fa-pencil"></i> Edit
                            </a>
                        </div>*@
                    </div>
                    <div class="portlet-body" data-bind="with: ProductInfo">
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Product Code:
                            </div>
                            <div id="clientCode" class="col-md-4 value" data-bind="text:productCode">

                            </div>
                            <div class="col-md-2 name">
                                Product Desc:
                            </div>
                            <div class="col-md-4 value" data-bind="text:productDescription">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Category Code:
                            </div>
                            <div class="col-md-4 value" data-bind="text:categoryCode">

                            </div>

                            <div class="col-md-2 name">
                                Category Description:
                            </div>
                            <div class="col-md-4 value" data-bind="text:categoryName">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Unit OF Measure:
                            </div>
                            <div class="col-md-4 value" data-bind="text:UOM">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Unit Price:
                            </div>
                            <div class="col-md-4 value" data-bind="text:convertToCurrency(unitPrice)">

                            </div>
                            <div class="col-md-2 name">
                                Reorder Level:
                            </div>
                            <div class="col-md-4 value" data-bind="text:reorderLevel">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Beginning:
                            </div>
                            <div class="col-md-4 value" data-bind="text:beginning">

                            </div>
                            <div class="col-md-2 name">
                                Incomming:
                            </div>
                            <div class="col-md-4 value" data-bind="text:incoming">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Outgoing:
                            </div>
                            <div class="col-md-4 value" data-bind="text:outgoing">

                            </div>
                            <div class="col-md-2 name">
                                Ending:
                            </div>
                            <div class="col-md-4 value" data-bind="text:ending">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Date Last Ordered:
                            </div>
                            <div class="col-md-4 value" data-bind="text:convertDateTimeFromJson(dateLastOrdered)">

                            </div>
                            <div class="col-md-2 name">
                                Last Ordered Price:
                            </div>
                            <div class="col-md-4 value" data-bind="text:convertToCurrency(lastOrderedPrice)">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Date Last Sold:
                            </div>
                            <div class="col-md-4 value" data-bind="text:convertDateTimeFromJson(dateLastSold)">

                            </div>
                            <div class="col-md-2 name">
                                Last Sold Price:
                            </div>
                            <div class="col-md-4 value" data-bind="text:convertToCurrency(lastSoldPrice)">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Date Created:
                            </div>
                            <div class="col-md-4 value" data-bind="text:convertDateTimeFromJson(dateCreated)">

                            </div>
                            <div class="col-md-2 name">
                                Created By:
                            </div>
                            <div class="col-md-4 value" data-bind="text:createdByName">

                            </div>
                        </div>
                        <div class="row static-info">
                            <div class="col-md-2 name">
                                Date Last Modified:
                            </div>
                            <div class="col-md-4 value" data-bind="text:convertDateTimeFromJson(dateLastModified)">

                            </div>
                            <div class="col-md-2 name">
                                Modified By:
                            </div>
                            <div class="col-md-4 value" data-bind="text:modifiedByName">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Begin: Product Transactions/ Price History-->
        <div class="row">

            <div class="col-md-8">
                <div class="portlet box blue-hoki">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-users"></i>
                            <span class="caption-subject  uppercase">Product Transactions</span>
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse" data-original-title="" title="">
                            </a>
                            <a data-load="true" data-bind="click: GetTransactions" class="reload" title="">
                            </a>

                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="scroller" style="height:200px" data-always-visible="1" data-rail-visible="1" data-rail-color="red" data-handle-color="blue">


                            <div class="table-container" data-bind="loadingWhen: isLoading1">
                                <table class="table table-striped table-bordered table-hover table-advance" id="datatable_ajax">
                                    <thead>
                                        <tr role="row" class="heading">

                                            <th width="20%">
                                                Doc #
                                            </th>
                                            <th class="display-hide">
                                                Doc ID
                                            </th>
                                            <th width="20%">
                                                Type
                                            </th>
                                            <th width="20%">
                                                QTY
                                            </th>
                                            <th width="20%">
                                                Date
                                            </th>
                                            <th width="5%">

                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach: Transactions">
                                        <tr>
                                            <td data-bind="text:documentNumber"></td>
                                            <td class="display-hide" data-bind="text:documentId"></td>
                                            <td>
                                                <span class="label label-sm  label-mini" data-bind="css: documentType == 1 ? 'label-success':'label-warning'">
                                                    <span data-bind="text: documentType == 1 ? ' Sale':' Purchase'"></span>
                                                </span>
                                            </td>
                                            <td><span data-bind="text: documentType == 1 ? '-':'+'"></span> <span data-bind ="text:quantity"></span></td>
                                            <td data-bind="text:convertDateTimeFromJson(dateCreated)"></td>
                                            <td>
                                                <a data-bind="click:$parent.ViewDocument" class="btn default btn-xs blue" style="margin-bottom: 2px !important;">
                                                    <i class="fa fa-folder-open-o "></i>
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="portlet box blue-hoki">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-users "></i>
                            <span class="caption-subject  uppercase">Price History</span>
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse" data-original-title="" title="">
                            </a>
                            <a data-load="true" data-bind="click: GetPriceHistory" class="reload" title="">
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="scroller" style="height:200px" data-always-visible="1" data-rail-visible="1" data-rail-color="red" data-handle-color="blue">

                            <div class="table-container" data-bind="loadingWhen: isLoading2">
                                <table class="table table-striped table-bordered table-hover table-advance display-hidden" id="datatable_ajax">
                                    <thead>
                                        <tr role="row" class="heading">

                                            <th width="50%">
                                                Price
                                            </th>
                                            <th width="50%">
                                                Date
                                            </th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach: PriceHistory">
                                        <tr>
                                            <td data-bind="text:convertToCurrency(Price)"></td>
                                            <td data-bind="text:convertDateTimeFromJson(dateCreated)"></td>
                                            
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<input type="hidden" id="hdnBackToListUrl" data-url="@Url.Action("BranchProducts", "Product", new { area = "Administration" }, null)" />
<input type="hidden" id="hdnProductInfoUrl" data-url="@Url.Action("GetProductInfo", "Product", new { area = "Administration" }, null)" />
<input type="hidden" id="hdnTransactionsUrl" data-url="@Url.Action("GetProductTransactions", "Product", new { area = "Administration" }, null)" />
<input type="hidden" id="hdnPriceHistoryUrl" data-url="@Url.Action("GetProductPriceHistory", "Product", new { area = "Administration" }, null)" />
<input type="hidden" id="hdnViewSalesInvoiceUrl" data-url="@Url.Action("EditBranchSalesInvoice", "Sales", new { area = "Modules" }, null)" />
<input type="hidden" id="hdnViewPurchaseOrderUrl" data-url="@Url.Action("EditBranchPurchaseOrder", "Purchase", new { area = "Modules" }, null)" />

<script src="@Url.Content("~/Areas/Administration/Scripts/ViewProduct.js")"></script>

